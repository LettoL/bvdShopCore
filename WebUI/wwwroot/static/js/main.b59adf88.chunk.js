(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{83:function(e,t,a){e.exports=a(95)},88:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),c=a.n(l),u=(a(88),a(7)),o=a(28),s=a(29),i=a(12),m=a.n(i),p=a(15),E=a(43),d=a(44),b=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),c=Object(u.a)(l,2),o=c[0],s=c[1];return{loading:a,request:Object(n.useCallback)(function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,l,c,u,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"GET",n=o.length>2&&void 0!==o[2]?o[2]:null,l=o.length>3&&void 0!==o[3]?o[3]:{},r(!0),e.prev=4,n&&(n=JSON.stringify(n),l["Content-Type"]="application/json"),e.next=8,fetch(t,{method:a,body:n,headers:l});case 8:return c=e.sent,e.next=11,c.json();case 11:if(u=e.sent,c.ok){e.next=14;break}throw new Error(u.message||"\u0427\u0442\u043e-\u0442\u043e \u043d\u0435 \u0442\u0430\u043a");case 14:return r(!1),e.abrupt("return",u);case 18:throw e.prev=18,e.t0=e.catch(4),r(!1),s(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:o,clearError:Object(n.useCallback)((function(){return s(null)}),[])}},f="http://localhost:5000/",g=a(145),v=a(132),O=a(124),j=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{item:!0,xs:6},r.a.createElement(g.a,{label:"\u0412\u043d\u0435\u0441\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440\u044b",multiline:!0,rows:10,variant:"outlined",value:e.productsText,onChange:e.productsTextChange,name:"products",fullWidth:!0}),r.a.createElement("br",null),r.a.createElement(v.a,{variant:"contained",color:"primary",onClick:e.productsTextHandle},"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c")),r.a.createElement(O.a,{item:!0,xs:5},r.a.createElement("ul",null,e.products.map((function(e){return r.a.createElement("li",{key:e.number},e.number,e.code,e.title,e.amount,e.price,e.sum)})))))},h=function(){b().request;var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)({products:""}),o=Object(u.a)(c,2),s=o[0],i=o[1],f=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.products.split("\n"),a=t.map((function(e){return e.split(";")})),n=a.map((function(e){return{number:+e[0].replace(",",".").replace(/\s+/g,""),code:e[1],title:e[2],amount:+e[3].replace(",",".").replace(/\s+/g,""),price:+e[5].replace(",",".").replace(/\s+/g,""),sum:+e[6].replace(",",".").replace(/\s+/g,"")}})),l(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(j,{products:a,productsText:s.products,productsTextChange:function(e){i(Object(d.a)({},s,Object(E.a)({},e.target.name,e.target.value)))},productsTextHandle:f})},x=a(134),k=a(135),w=a(136),C=a(137),y=a(138),S=a(139),P=a(144),I=a(130),T=a(147),N=a(142),L=a(133),q=a(140),F=f,H=function(){var e=R(),t=Object(n.useState)(0),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(10),s=Object(u.a)(o,2),i=s[0],E=s[1],d=Object(n.useState)(0),f=Object(u.a)(d,2),v=f[0],O=f[1],j=Object(n.useState)(0),h=Object(u.a)(j,2),q=h[0],H=h[1],D=Object(n.useState)(""),A=Object(u.a)(D,2),J=A[0],M=A[1],W=b(),G=W.loading,V=W.request,B=Object(n.useState)([]),z=Object(u.a)(B,2),K=z[0],Q=z[1],U=Object(n.useState)([]),X=Object(u.a)(U,2),Y=X[0],Z=X[1],$=Object(n.useState)([]),_=Object(u.a)($,2),ee=_[0],te=_[1],ae=Object(n.useCallback)(Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V(F+"api/products");case 3:t=e.sent,Q(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[V]),ne=Object(n.useCallback)(Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V(F+"api/shops");case 3:t=e.sent,Z(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[V]),re=Object(n.useCallback)(Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V(F+"api/categories");case 3:t=e.sent,te(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[V]);return Object(n.useEffect)((function(){ae(),ne(),re()}),[ae,ne,re]),G?r.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{className:e.formControl},r.a.createElement(T.a,{id:"demo-simple-select-label"},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),r.a.createElement(N.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:v,onChange:function(e){O(e.target.value)}},r.a.createElement(L.a,{value:0},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0430\u0433\u0430\u0437\u0438\u043d"),Y.map((function(e){return r.a.createElement(L.a,{key:e.id,value:e.id},e.title)})))),r.a.createElement(I.a,{className:e.formControl},r.a.createElement(T.a,{id:"demo-simple-select-label"},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),r.a.createElement(N.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:q,onChange:function(e){H(e.target.value)}},r.a.createElement(L.a,{value:0},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"),ee.map((function(e){return r.a.createElement(L.a,{key:e.id,value:e.id},e.title)})))),r.a.createElement(I.a,{className:e.formControl},r.a.createElement(g.a,{label:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e",onChange:function(e){M(e.target.value)}})),r.a.createElement(x.a,null,r.a.createElement(k.a,null,r.a.createElement(w.a,null,r.a.createElement(C.a,null,r.a.createElement(y.a,null,"\u0410\u0440\u0442\u0438\u043a\u0443\u043b"),r.a.createElement(y.a,null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),r.a.createElement(y.a,null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),r.a.createElement(y.a,null,"\u0426\u0435\u043d\u0430"),r.a.createElement(y.a,null,"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),r.a.createElement(y.a,null,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"))),r.a.createElement(S.a,null,K.filter((function(e){return 0===v||e.shopId===v})).filter((function(e){return 0===q||e.categoryId===q})).filter((function(e){return""===J||e.title.toLowerCase().includes(J.toLowerCase())})).slice(l*i,l*i+i).map((function(e){return r.a.createElement(C.a,{key:e.id},r.a.createElement(y.a,null,e.code),r.a.createElement(y.a,null,e.title),r.a.createElement(y.a,null,e.amount),r.a.createElement(y.a,null,e.price),r.a.createElement(y.a,null,e.shop),r.a.createElement(y.a,null,e.category))}))))),r.a.createElement(P.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:K.filter((function(e){return 0===v||e.shopId===v})).filter((function(e){return 0===q||e.categoryId===q})).filter((function(e){return""===J||e.title.toLowerCase().includes(J.toLowerCase())})).length,rowsPerPage:i,page:l,onChangePage:function(e,t){c(t)},onChangeRowsPerPage:function(e){E(+e.target.value),c(0)}}))},R=Object(q.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),D=f,A=function(){var e=J(),t=Object(n.useState)([]),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)([]),s=Object(u.a)(o,2),i=s[0],E=s[1],f=Object(n.useState)(0),v=Object(u.a)(f,2),O=v[0],j=v[1],h=Object(n.useState)(0),q=Object(u.a)(h,2),F=q[0],H=q[1],R=Object(n.useState)(10),A=Object(u.a)(R,2),M=A[0],W=A[1],G=b(),V=(G.loading,G.request),B=Object(n.useState)(null),z=Object(u.a)(B,2),K=z[0],Q=z[1],U=Object(n.useState)(null),X=Object(u.a)(U,2),Y=X[0],Z=X[1],$=Object(n.useCallback)(Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V(D+"api/productsHistory");case 3:t=e.sent,c(t.map((function(e){return Object(d.a)({},e,{date:new Date(e.dateTime)})}))),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[V]),_=Object(n.useCallback)(Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V(D+"api/shops");case 3:t=e.sent,E(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[V]);return Object(n.useEffect)((function(){$(),_()}),[$,_]),r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{className:e.formControl},r.a.createElement(T.a,{id:"demo-simple-select-label"},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),r.a.createElement(N.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:O,onChange:function(e){j(e.target.value)}},r.a.createElement(L.a,{value:0},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0430\u0433\u0430\u0437\u0438\u043d"),i.map((function(e){return r.a.createElement(L.a,{key:e.id,value:e.id},e.title)})))),r.a.createElement(I.a,{className:e.formControl},r.a.createElement(g.a,{label:"\u0414\u0430\u0442\u0430 \u0441",type:"date",defaultValue:"",className:e.textField,InputLabelProps:{shrink:!0},onChange:function(e){return Q(new Date(e.target.value))}})),r.a.createElement(I.a,{className:e.formControl},r.a.createElement(g.a,{label:"\u0414\u0430\u0442\u0430 \u043f\u043e",type:"date",defaultValue:"",className:e.textField,InputLabelProps:{shrink:!0},onChange:function(e){return Z(new Date(e.target.value))}})),r.a.createElement(x.a,null,r.a.createElement(k.a,null,r.a.createElement(w.a,null,r.a.createElement(C.a,null,r.a.createElement(y.a,null,"\u0414\u0430\u0442\u0430"),r.a.createElement(y.a,null,"\u0422\u043e\u0432\u0430\u0440"),r.a.createElement(y.a,null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),r.a.createElement(y.a,null,"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"),r.a.createElement(y.a,null,"\u0422\u0438\u043f"),r.a.createElement(y.a,null,"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"))),r.a.createElement(S.a,null,l.filter((function(e){return 0===O||e.shopId===O})).filter((function(e){return!K||e.date>=K})).filter((function(e){return!Y||e.date<=Y})).slice(F*M,F*M+M).map((function(e){return r.a.createElement(C.a,{key:e.id},r.a.createElement(y.a,null,e.date.toLocaleDateString()),r.a.createElement(y.a,null,e.productTitle),r.a.createElement(y.a,null,e.amount),r.a.createElement(y.a,null,e.supplierName),r.a.createElement(y.a,null,e.type),r.a.createElement(y.a,null,e.shopTitle))}))))),r.a.createElement(P.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:l.filter((function(e){return 0===O||e.shopId===O})).filter((function(e){return!K||e.date>=K})).filter((function(e){return!Y||e.date<=Y})).length,rowsPerPage:M,page:F,onChangePage:function(e,t){H(t)},onChangeRowsPerPage:function(e){W(+e.target.value),H(0)}}))},J=Object(q.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),M=function(){var e=b(),t=e.loading,a=e.request,l=Object(n.useState)([]),c=Object(u.a)(l,2),o=c[0],s=c[1],i=Object(n.useCallback)(Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("http://localhost:5000/api/managers");case 3:t=e.sent,s(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[a]);return Object(n.useEffect)((function(){i()}),[i]),t?r.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."):r.a.createElement(x.a,null,r.a.createElement(k.a,null,r.a.createElement(w.a,null,r.a.createElement(C.a,null,r.a.createElement(y.a,null,"\u0418\u043c\u044f"))),r.a.createElement(S.a,null,o.map((function(e){return r.a.createElement(C.a,{key:e.id},r.a.createElement(y.a,null,e.name))})))))},W=a(96),G=a(141),V=a(131),B=function(){return r.a.createElement(V.a,null,r.a.createElement(W.a,{button:!0},r.a.createElement(o.b,{to:"/admin/import"},r.a.createElement(G.a,{primary:"\u0418\u043c\u043f\u043e\u0440\u0442"}))),r.a.createElement(W.a,{button:!0},r.a.createElement(o.b,{to:"/admin/managers"},r.a.createElement(G.a,{primary:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u044b"}))),r.a.createElement(W.a,{button:!0},r.a.createElement(o.b,{to:"/admin/products"},r.a.createElement(G.a,{primary:"\u0412\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b"}))),r.a.createElement(W.a,{button:!0},r.a.createElement(o.b,{to:"/admin/productsHistory"},r.a.createElement(G.a,{primary:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u043e\u0432"}))))},z=Object(q.a)((function(e){return{root:{flexGrow:1}}})),K=function(e){var t=z();return r.a.createElement("div",{className:t.root},r.a.createElement(O.a,{container:!0,spacing:3},r.a.createElement(O.a,{item:!0,xs:1},r.a.createElement(B,null)),r.a.createElement(O.a,{container:!0,item:!0,xs:11},e.page)))},Q=Object(n.createContext)({userId:null,userRole:"",isAuth:!1}),U=a(143);var X=function(){var e=r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/admin/import",exact:!0},r.a.createElement(h,null)),r.a.createElement(s.b,{path:"/admin/products",exact:!0},r.a.createElement(H,null)),r.a.createElement(s.b,{path:"/admin/productsHistory",exact:!0},r.a.createElement(A,null)),r.a.createElement(s.b,{path:"/admin/managers",exact:!0},r.a.createElement(M,null)),r.a.createElement(s.a,{to:"/admin/import"})),t=Object(U.a)(),a=Object(u.a)(t,1)[0],n=a.userId,l=a.userRole,c=!!n;return console.log(l),"Administrator"===l?r.a.createElement(Q.Provider,{value:{userId:n,userRole:l,isAuth:c}},r.a.createElement(o.a,null,r.a.createElement(K,{page:e}))):"Manager"===l?r.a.createElement("h1",null,"Manager"):r.a.createElement("h1",null,"\u041d\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438")};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.b59adf88.chunk.js.map